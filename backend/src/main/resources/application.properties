# Configuraci贸n por defecto de la aplicaci贸n
# Este archivo se usa cuando no se especifica un perfil espec铆fico

# Configuraci贸n de la base de datos H2
quarkus.datasource.db-kind=sqlite
quarkus.datasource.jdbc.driver=org.sqlite.JDBC
quarkus.datasource.jdbc.url=jdbc:sqlite:file:data.db?journal_mode=WAL&busy_timeout=10000&synchronous=NORMAL&cache=shared

# Configuracion de Hibernate ORM
# Evitar recrear el esquema para poder usar los datos existentes de la base
quarkus.hibernate-orm.database.generation=update
quarkus.hibernate-orm.log.sql=${QUARKUS_HIBERNATE_ORM_LOG_SQL:true}
# Desactivar carga automtica de import.sql en este perfil (usar perfiles especficos si se requiere)
quarkus.hibernate-orm.sql-load-script=no-file
quarkus.hibernate-orm.dialect=org.hibernate.community.dialect.SQLiteDialect
# Use identity columns for ids to avoid sequence table on SQLite
quarkus.hibernate-orm.database.generation.identity-strategy=identity
# Optimize JDBC writes to reduce time holding the single connection
quarkus.hibernate-orm.jdbc.batch_size=25
quarkus.hibernate-orm.jdbc.order_inserts=true
quarkus.hibernate-orm.jdbc.order_updates=true

# Configuracin de migracin de base de datos
quarkus.flyway.migrate-at-start=false
quarkus.flyway.baseline-on-migrate=true
quarkus.flyway.baseline-version=0.0.1
quarkus.flyway.sql-migration-prefix=V
quarkus.flyway.sql-migration-separator=__
quarkus.flyway.sql-migration-suffixes=.sql
# En entorno de desarrollo, evitar acciones automticas de Flyway que abren la DB
quarkus.flyway.repair-at-start=false
quarkus.flyway.clean-on-validation-error=false
quarkus.flyway.clean-disabled=false

# Use a small pool suitable for SQLite (allow isolated connections)
quarkus.datasource.jdbc.max-size=1
quarkus.datasource.jdbc.initial-size=1
# Allow more time to wait for connections during bursts
quarkus.datasource.jdbc.acquisition-timeout=60S
# Detect potential connection/transaction leaks
quarkus.datasource.jdbc.leak-detection-interval=5S

# Make sure we?re not trying XA with SQLite (use local transactions)
quarkus.datasource.jdbc.transactions=enabled


# Configuraci贸n de logging
quarkus.log.level=INFO
quarkus.log.category."org.hibernate.SQL".level=DEBUG
quarkus.log.category."org.hibernate.type.descriptor.sql.BasicBinder".level=TRACE

# Configuraci贸n de health checks
quarkus.smallrye-health.root-path=/health
quarkus.smallrye-health.liveness-path=/health/live
quarkus.smallrye-health.readiness-path=/health/ready

# Configuraci贸n de CORS
quarkus.http.cors=true
quarkus.http.cors.origins=*
quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS
quarkus.http.cors.headers=accept,authorization,content-type,x-requested-with
quarkus.http.cors.exposed-headers=Content-Disposition
quarkus.http.cors.access-control-max-age=24H
